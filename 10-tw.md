NIP-10
======


文字類型 `kind-1` 事件的標籤 "e" 與 "p"
------------------------------------

`草稿` `可選項` `作者:unclebobmartin`

## 概要
本文談文字類型事件的標籤 "e" 與 "p" 該如何使用；特別指像其他文字訊息事件的回覆。本文想幫助客戶端將原文與回覆整理為樹狀結構。

## Positional "e" tags (DEPRECATED)
>This scheme is in common use; but should be considered deprecated.

`["e", <event-id>, <relay-url>]`  as per NIP-01.

Where:

 * `<event-id>` is the id of the event being referenced.
 * `<relay-url>` is the URL of a recommended relay associated with the reference.  Many clients treat this field as optional.
 
**The positions of the "e" tags within the event denote specific meanings as follows**:

 * No "e" tag: <br>
 This event is not a reply to, nor does it refer to, any other event.

 * One "e" tag: <br>
 `["e", <id>]`: The id of the event to which this event is a reply.

 * Two "e" tags:  `["e", <root-id>]`, `["e", <reply-id>]` <br>
 `<root-id>` is the id of the event at the root of the reply chain.  `<reply-id>` is the id of the article to which this event is a reply.  

 * Many "e" tags: `["e", <root-id>]` `["e", <mention-id>]`, ..., `["e", <reply-id>]`<br>
There may be any number of `<mention-ids>`.  These are the ids of events which may, or may not be in the reply chain.  
They are citings from this event.  `root-id` and `reply-id` are as above.

>This scheme is deprecated because it creates ambiguities that are difficult, or impossible to resolve when an event references another but is not a reply.

## 標籤 "e" 的註記 (PREFERRED)
`["e", 「事件 id」, 「中繼站址」, 「註記文字」]`

其中：

 * `「事件 id」` 是參考到的事件 id。
 * `「中繼站址」` 是建議相關的中繼站址，由此能取得上述參考事件。本欄位必填。
 * `「註記文字」` 是下列幾種文字之一： `"reply"`，`"root"`，`"mention"`。

**標籤 "e" 不須依照註記順序排列。**  註記為 `"reply"` 的事件表示本事件所回覆的那個事件 id 。註記為 `"root"` 的事件表示本事件所回覆的那串討論串。第一層直接回覆 `"root"` 事件的訊息只帶有標記 `"root"` 的相關事件。標記為 `"mention"` ，表示引用另一個文字訊息事件，或者重新開啟該事件話題。

第一層直接回覆 `"root"` 的事件，必定只帶有唯一個標籤 "e" ，其註記為 `"root"`。

>本文較推薦本段規格，這樣，每個事件都能提到其它事件，但不會搞不清楚哪個事件是討論串的第一篇，而回覆的是哪一篇。


## 標籤 "p"
標籤 "p" 用在文字訊息事件裡，以一列多個 pubkey 記得在討論串裡的相關人。

若有個事件 E ，其標籤 "p" 該包含該事件回覆的全部訊息的 pubkey。

例如，有個由 `a1` 發送的文字訊息事件，其標籤 "p" 有 [`p1`, `p2`, `p3`]，那麼，回覆 `a1` 事件的標籤 "p" 變成 [`a1`, `p1`, `p2`, `p3`] ，但可不依特定順序排列。
